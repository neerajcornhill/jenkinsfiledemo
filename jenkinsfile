pipeline{
    
    agent { label 'linuxagent1' }
    tools{
        maven 'mymaven'
    }
   // in agent any = any available server 
   // agent any

  triggers {
        pollSCM('* * * * *')
    }
  
   stages{
       stage('Clone a Repo'){
          
 steps {
        checkout scm: [$class: 'GitSCM',
          userRemoteConfigs: [[url: 'https://github.com/Sonal0409/DevOpsCodeDemo.git',
                              credentialsId: 'myCredId']
        ], poll: true
      }
       }
       
       stage('Compile the code'){
           steps{
               sh 'mvn compile'
           }
       }
       
       stage('CodeReview'){
           steps{
               sh 'mvn pmd:pmd'
           }
       }
       
       stage('Unit Test'){
           steps{
               sh 'mvn test'
           }
       }
       
       stage('Package'){
           steps{
               sh 'mvn package'
           }
       }
    }
}
